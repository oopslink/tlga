# 🚀 快速启动指南

## 当前状态
✅ 项目已完整实现并正常运行！
✅ 开发服务器正在运行: **http://localhost:3001/**

## 立即访问

打开浏览器访问以下地址：

- **仪表盘**: http://localhost:3001/
- **每日任务**: http://localhost:3001/daily

## 项目特性

### ✨ 核心功能
- 三种货币系统(金币💰/经验值✨/星星⭐)
- 5档奥数加成倍率(1.0x ~ 2.0x + Lv10额外0.2x)
- 等级特权系统(Lv4-6金币+20%, Lv7-9星星×2, Lv10梦想基金)
- 连击系统(3/7/14天可叠加奖励)
- 语言学习组合奖励
- 副本自动累计进度
- 隐藏成就系统

### 📊 测试状态
- **86/86** 单元测试全部通过 ✅
- 覆盖所有核心积分引擎模块

### 📂 演示数据
已生成13天演示数据:
- 玩家: 小学霸 Lv4 (黄金学者)
- 金币: ~350, XP: ~220, 星星: ~12
- 连击: 13天 🔥
- 已解锁成就: 完美一天、七日不败、语言大师

## 常用命令

```bash
# 启动开发服务器(如果未运行)
npm run dev

# 运行测试
npm run test

# 重新生成演示数据
npm run seed-demo

# 初始化空数据
npm run init-data

# 构建生产版本
npm run build
```

## 使用流程

### 1. 查看仪表盘
访问 http://localhost:3001/
- 查看玩家信息、等级、货币
- 查看连击天数
- 点击"记录每日任务"进入任务页面

### 2. 记录每日任务
访问 http://localhost:3001/daily
- ✅ 勾选完成的任务
- 📝 填写任务详情:
  - 作业质量(完美/良好/一般)
  - 数学难度(基础/中等/困难/竞赛/奥数)
  - 数学题目数量
  - 颠球时长
- 🌍 添加语言学习记录
- 💰 实时预览奖励计算
- 💾 点击"保存并结算奖励"

### 3. 查看奖励分解
保存后查看详细的奖励来源:
- 基础奖励
- 等级加成(Lv4-6: +20%)
- 奥数倍率(×1.0 ~ ×2.2)
- 连击奖励
- 语言组合奖励
- 星星加成(Lv7-9: ×2)

## 核心计算公式

```
最终金币 = floor(基础金币 × (1 + 等级加成%) × 奥数倍率) + 连击奖励

计算顺序:
1. 基础奖励(作业+数学+颠球+语言+随机掉落)
2. 等级金币加成(Lv4-6: +20%) ← 在奥数倍率之前
3. 奥数加成倍率(应用于所有金币)
4. 连击奖励(3/7/14天)
5. 等级星星加成(Lv7-9: ×2)
6. 梦想基金(Lv10: 10%金币单独存储)
```

## 数据文件位置

```
data/
├── player.json              # 玩家档案
├── achievements.json        # 成就记录
├── big-goals.json          # 大目标进度
├── dungeon.json            # 副本进度
├── wishing-pool.json       # 许愿记录
├── star-exchange.json      # 星星兑换历史
└── weeks/
    └── 2026-W07/
        ├── daily-logs/
        │   └── 2026-02-13.json  # 每日记录
        ├── weekly-challenge.json # 周挑战
        └── weekly-summary.json   # 周总结
```

## 技术架构

- **前端**: Vue 3 + TypeScript + Composition API
- **构建**: Vite
- **状态**: Pinia
- **路由**: Vue Router
- **测试**: Vitest
- **存储**: JSON文件 + localStorage降级

## 开发说明

### 修改奖励规则
所有奖励常量在 `src/engine/constants.ts` 统一管理

### 添加新功能
1. 定义类型 (`src/types/index.ts`)
2. 实现引擎逻辑 (`src/engine/`)
3. 编写测试 (`tests/engine/`)
4. 集成到UI (`src/pages/` 或 `src/components/`)

### 调试
- 打开浏览器开发者工具
- 查看Console日志
- 检查Network请求到 `/api/data/`
- 查看 `data/` 目录下的JSON文件

## 故障排除

### 服务器未启动
```bash
npm run dev
```

### 端口占用
服务器会自动尝试其他端口(3001, 3002...)

### 数据丢失
```bash
npm run seed-demo  # 重新生成演示数据
```

### 测试失败
```bash
npm run test       # 查看失败原因
```

## 联系支持

- 查看 README.md 了解完整文档
- 查看 `tests/` 目录了解测试用例
- 查看 `src/engine/` 了解积分计算逻辑

---

**🎮 开始你的学习冒险之旅！** ✨
