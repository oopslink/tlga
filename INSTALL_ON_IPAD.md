# 📱 在 iPad 上安装为独立 App

## 🎯 目标

将"小学霸冒险记"安装到 iPad 主屏幕，作为独立 App 使用，完全离线可用。

---

## ✅ 方案 A：局域网安装（推荐）

适合家庭使用，无需云端服务。

### 步骤 1：在电脑上准备应用

```bash
# 1. 进入项目目录
cd /path/to/tlga

# 2. 构建生产版本
npm run build

# 3. 启动本地服务器
npx serve -s dist -p 3000
```

看到如下输出表示成功：
```
   ┌────────────────────────────────────────┐
   │                                        │
   │   Serving!                             │
   │                                        │
   │   Local:  http://localhost:3000        │
   │                                        │
   └────────────────────────────────────────┘
```

### 步骤 2：获取电脑局域网 IP

**macOS/Linux:**
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

**或者简单方法:**
- macOS: 系统设置 → 网络 → WiFi → 详细信息 → 查看 IP
- Windows: 设置 → 网络和 Internet → WiFi → 属性 → IPv4 地址

**示例输出:**
```
inet 192.168.1.100
```

记住这个 IP 地址：`192.168.1.100`

### 步骤 3：在 iPad 上访问

1. **确保 iPad 和电脑在同一 WiFi 网络**

2. **打开 Safari 浏览器**（必须使用 Safari，Chrome 不支持）

3. **访问电脑的局域网地址**
   ```
   http://192.168.1.100:3000
   ```

4. **应用会正常加载**，可以看到仪表盘页面

### 步骤 4：添加到主屏幕

1. **点击分享按钮**
   - 在 Safari 底部工具栏
   - 中间的 ↑ 图标（分享按钮）

2. **向下滚动**分享菜单

3. **选择"添加到主屏幕"**
   - 图标：一个带加号的方块
   - 文字：添加到主屏幕

4. **编辑应用信息**
   - 名称：小学霸（或自定义）
   - 网址：会自动填写
   - 图标：自动显示应用图标

5. **点击右上角"添加"按钮**

### 步骤 5：开始使用

1. **返回主屏幕**
   - 可以看到新的应用图标
   - 图标：奖杯 + 星星设计

2. **点击图标启动**
   - 全屏显示，无浏览器界面
   - 像原生 App 一样的体验

3. **测试离线功能**
   - 关闭 WiFi
   - 或启用飞行模式
   - 应用仍然完全可用！

---

## ✅ 方案 B：云端托管（更稳定）

如果想要更稳定的访问，可以托管到云端（完全免费）。

### 步骤 1：部署到 Vercel

```bash
# 1. 安装 Vercel CLI（仅首次需要）
npm i -g vercel

# 2. 登录 Vercel（仅首次需要）
vercel login

# 3. 部署到生产环境
npm run deploy
```

### 步骤 2：获取部署网址

部署成功后会显示：
```
🔗  Production: https://tlga-xxxx.vercel.app
```

复制这个网址。

### 步骤 3：在 iPad 上安装

1. 打开 Safari
2. 访问部署网址：`https://tlga-xxxx.vercel.app`
3. 点击分享 → 添加到主屏幕
4. 完成！

**优势:**
- ✅ 随时随地访问（不限于局域网）
- ✅ 自动 HTTPS（更安全）
- ✅ 全球 CDN（更快）
- ✅ 数据仍然存储在本地

---

## 📱 安装后的体验

### 视觉体验

| 特性 | 浏览器访问 | PWA App |
|------|------------|---------|
| 地址栏 | ✅ 有 | ❌ 无 |
| 工具栏 | ✅ 有 | ❌ 无 |
| 全屏显示 | ❌ 否 | ✅ 是 |
| 应用图标 | ❌ 无 | ✅ 有 |
| 多任务切换 | Safari | 独立 App |

### 功能体验

**启动速度:**
- 点击图标 → 立即启动
- 比浏览器访问更快
- 保持上次状态

**离线使用:**
- 首次访问后自动缓存
- 之后完全离线可用
- 无需任何网络连接

**数据隔离:**
- 与 Safari 浏览器数据独立
- 清除 Safari 数据不影响 App
- 卸载 App 才会删除数据

---

## 🔄 更新应用

### 自动更新

应用会自动检测新版本：

1. **检测时机**
   - 每次启动 App
   - 或切换回 App 时

2. **更新提示**
   - 发现新版本会提示
   - 刷新页面即可更新

3. **更新步骤**
   - 下拉刷新
   - 或重启 App
   - 自动加载新版本

### 手动更新

如果需要手动更新：

1. 关闭 App（向上滑动关闭）
2. 重新打开 App
3. 等待自动更新

---

## 💾 数据管理

### 数据位置

所有数据存储在：
- **位置**: iPad 本地 Safari localStorage
- **大小**: 通常 < 1MB
- **内容**:
  - 周计划数据
  - 每日进度单
  - 审批记录
  - 自定义任务
  - 玩家状态

### 数据备份

**临时备份:**
1. 重要数据截图保存
2. 记录关键信息

**完整备份（未来功能）:**
- 导出为 JSON 文件
- 保存到 iCloud/Files
- 在其他设备导入

### 数据恢复

如果数据丢失：
- ❌ 无法自动恢复（本地存储）
- ✅ 可以重新开始
- ✅ 可以导入备份（如果有）

**预防措施:**
- 定期截图重要记录
- 不要清除 Safari 数据
- 不要卸载 App

---

## 🆘 常见问题

### Q1: 找不到"添加到主屏幕"选项？

**原因:** 可能不是用 Safari 浏览器

**解决:**
1. 确保使用 Safari（不是 Chrome/Firefox）
2. 点击底部中间的分享按钮（↑）
3. 向下滚动查找选项

### Q2: 添加后图标显示不正确？

**原因:** 图标未正确加载

**解决:**
1. 删除主屏幕上的 App
2. 重新访问网址
3. 确保网址能正常访问
4. 重新添加到主屏幕

### Q3: 离线后无法使用？

**原因:** 首次访问未完成资源加载

**解决:**
1. 确保首次访问时有网络
2. 等待页面完全加载
3. 浏览一下各个页面（触发缓存）
4. 再次尝试离线使用

### Q4: 数据突然丢失？

**可能原因:**
- 清除了 Safari 数据
- 卸载了 App
- iPad 存储空间不足

**预防:**
- 不要主动清除 Safari 数据
- 定期截图重要信息
- 保持足够存储空间

### Q5: 无法在局域网访问？

**检查清单:**
1. ✅ 电脑和 iPad 在同一 WiFi
2. ✅ 电脑防火墙允许端口 3000
3. ✅ 输入的 IP 地址正确
4. ✅ 服务器正在运行

**macOS 防火墙:**
系统设置 → 网络 → 防火墙 → 允许 Node

### Q6: 可以在 iPhone 上用吗？

**可以！** 完全相同的步骤：
1. Safari 访问网址
2. 分享 → 添加到主屏幕
3. 完成！

---

## 🎉 安装成功！

现在您可以：

1. ✅ 从主屏幕启动 App
2. ✅ 全屏使用，无浏览器界面
3. ✅ 完全离线工作
4. ✅ 享受原生 App 体验

**开始使用吧！** 📚✨

---

## 📸 安装过程截图指南

### 1. Safari 访问界面
```
┌─────────────────────────────┐
│ ⬅️  http://192.168.1.100:3000│
│                             │
│  🏆 小学霸冒险记              │
│                             │
│  仪表盘                       │
│  本周计划                     │
│  ...                        │
│                             │
│  [分享按钮 ↑]  [其他按钮]     │
└─────────────────────────────┘
```

### 2. 分享菜单
```
┌─────────────────────────────┐
│  拷贝                        │
│  信息                        │
│  邮件                        │
│  ...                        │
│  ➕ 添加到主屏幕  ← 选这个      │
│  添加书签                     │
└─────────────────────────────┘
```

### 3. 添加确认
```
┌─────────────────────────────┐
│  添加到主屏幕                 │
│  ─────────────────────       │
│  🏆 图标预览                  │
│                             │
│  名称: 小学霸                 │
│  网址: http://192.168...    │
│                             │
│  [取消]        [添加] ← 点击  │
└─────────────────────────────┘
```

### 4. 主屏幕效果
```
┌─────────────────────────────┐
│  [时钟]  [天气]              │
│                             │
│  [照片]  [设置]  [🏆小学霸]  │← 新图标
│                             │
│  [Safari] [邮件] [日历]      │
└─────────────────────────────┘
```

---

## 💡 使用技巧

### 快速启动
- 将 App 放在 Dock 栏
- 或放在首屏显示
- 一键启动，比浏览器快

### 多任务切换
- 双击 Home 键（或上滑暂停）
- 看到独立的 App 卡片
- 快速切换回应用

### 共享使用
- 一台电脑启动服务
- 全家人都可以访问
- 每人在自己设备上添加

### 外出使用
- 使用云端托管版本
- 或离线使用（已缓存）
- 不依赖家庭网络

---

**祝您使用愉快！** 🎊
